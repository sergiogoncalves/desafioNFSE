<mat-toolbar color="primary">
    Consulta de Créditos
</mat-toolbar>

<div class="container">
    <mat-card>
        <mat-card-title>Buscar Créditos</mat-card-title>
        <mat-card-content>
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Documento</mat-label>
                <input matInput [(ngModel)]="documento" placeholder="Número da NFS-e ou número do crédito">
            </mat-form-field>

            <div class="button-container">
                <button mat-raised-button color="primary" (click)="buscarCreditos()" [disabled]="!documento.trim()">
                    Consultar
                </button>
            </div>
        </mat-card-content>
    </mat-card>

    <mat-card *ngIf="creditos.length > 0" class="result-card">
        <mat-card-title>Resultados</mat-card-title>
        <table mat-table [dataSource]="creditos" class="mat-elevation-z8">

            <!-- ID -->
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> ID </th>
                <td mat-cell *matCellDef="let element"> {{ element.id }} </td>
            </ng-container>

            <!-- Número Crédito -->
            <ng-container matColumnDef="numeroCredito">
                <th mat-header-cell *matHeaderCellDef> Nº Crédito </th>
                <td mat-cell *matCellDef="let element"> {{ element.numeroCredito }} </td>
            </ng-container>

            <!-- Número NFSe -->
            <ng-container matColumnDef="numeroNfse">
                <th mat-header-cell *matHeaderCellDef> Nº NFSe </th>
                <td mat-cell *matCellDef="let element"> {{ element.numeroNfse }} </td>
            </ng-container>

            <!-- Data Constituição -->
            <ng-container matColumnDef="dataConstituicao">
                <th mat-header-cell *matHeaderCellDef> Data Constituição </th>
                <td mat-cell *matCellDef="let element"> {{ element.dataConstituicao }} </td>
            </ng-container>

            <!-- Valor ISSQN -->
            <ng-container matColumnDef="valorIssqn">
                <th mat-header-cell *matHeaderCellDef> Valor ISSQN </th>
                <td mat-cell *matCellDef="let element"> {{ element.valorIssqn | currency:'BRL' }} </td>
            </ng-container>

            <!-- Tipo Crédito -->
            <ng-container matColumnDef="tipoCredito">
                <th mat-header-cell *matHeaderCellDef> Tipo Crédito </th>
                <td mat-cell *matCellDef="let element"> {{ element.tipoCredito }} </td>
            </ng-container>

            <!-- Simples Nacional -->
            <ng-container matColumnDef="simplesNacional">
                <th mat-header-cell *matHeaderCellDef> Simples Nacional </th>
                <td mat-cell *matCellDef="let element"> {{ element.simplesNacional ? 'Sim' : 'Não' }} </td>
            </ng-container>

            <!-- Alíquota -->
            <ng-container matColumnDef="aliquota">
                <th mat-header-cell *matHeaderCellDef> Alíquota (%) </th>
                <td mat-cell *matCellDef="let element"> {{ element.aliquota }} </td>
            </ng-container>

            <!-- Valor Faturado -->
            <ng-container matColumnDef="valorFaturado">
                <th mat-header-cell *matHeaderCellDef> Valor Faturado </th>
                <td mat-cell *matCellDef="let element"> {{ element.valorFaturado | currency:'BRL' }} </td>
            </ng-container>

            <!-- Valor Dedução -->
            <ng-container matColumnDef="valorDeducao">
                <th mat-header-cell *matHeaderCellDef> Valor Dedução </th>
                <td mat-cell *matCellDef="let element"> {{ element.valorDeducao | currency:'BRL' }} </td>
            </ng-container>

            <!-- Base Cálculo -->
            <ng-container matColumnDef="baseCalculo">
                <th mat-header-cell *matHeaderCellDef> Base Cálculo </th>
                <td mat-cell *matCellDef="let element"> {{ element.baseCalculo | currency:'BRL' }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </mat-card>

</div>
